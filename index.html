<html>
<head>
    <title>Pizza! - Home</title>

    <!-- Compressed Foundation CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/6.1.2/foundation.min.css">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.7/jquery.fullPage.css" />

    <!-- Styled CSS -->
    <link rel="stylesheet" href="resources/stylesheet/style.css" />

    <!-- Including jquery -->
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>

    <!-- Compressed Foundation JavaScript -->
    <script src="https://cdn.jsdelivr.net/foundation/6.1.2/foundation.min.js"></script>

    <!-- Including the fonts -->
    <link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.7/jquery.fullPage.js"></script>

</head>
<body>

<div id="fullpage">
    <div class="section home">
        <div class="row">
            <div class="home-content">
                <a href="javascript:void(0)"><img src="resources/img/go-1.png" class="home-button" id="b" /></a>
                <h1>ARE YOU HUNGRY?</h1>
                <h3>How about trying our delicious pizza?</h3>

            </div>
        </div>
    </div>

    <div class="order" id="order">
        <form method="post" action="order.php" class="order-form">
            <div class="small-8 small-centered columns order-background">
                <div>
                    <img src="resources/img/logo-2.png" class="order-title">
                    <spam class="order-title">Create your own pizza!</spam>
                    <br><br>
                    <div class="row">
                        <div class="order-steps">
                            <span class="badge order-bullet">1</span>
                            <span class="order-subtitle">Pick a size:</span>
                        </div>
                        <br>
                        <div class="small-12 large-4 columns">
                            <label class="size">
                                <div class="pizza">
                                    <img src="resources/img/pizza-1.png" class="pizza">
                                    <p>Large</p>
                                </div>
                                <input type="radio" value="1" class="size1" name="size">
                            </label>
                        </div>
                        <div class="small-12 large-4 columns">
                            <label class="size">
                                <div class="pizza">
                                    <img src="resources/img/pizza-2.png" class="pizza" style="padding-top: 20px">
                                    <p>Medium</p>
                                </div>
                                <input type="radio" value="2" class="size1" name="size">
                            </label>
                        </div>
                        <div class="small-12 large-4 columns">
                            <label class="size">
                                <div class="pizza">
                                    <img src="resources/img/pizza-3.png" class="pizza" style="padding-top: 30px">
                                    <p>Small</p>
                                </div>
                                <input type="radio" value="3" class="size1" name="size">
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12">
                            <br>
                            <center>
                                <img src="resources/img/dash.png">
                            </center>
                            <br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="order-steps">
                            <span class="badge order-bullet">2</span>
                            <span class="order-subtitle">Choose your sauce:</span>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="sauce">
                                <div class="pizza">
                                    <img src="resources/img/sauce-1.png" class="pizza">
                                    <p>Marinara</p>
                                </div>
                                <input type="radio" value="1" class="sauce1" name="sauce">
                            </label>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="sauce">
                                <div class="pizza">
                                    <img src="resources/img/sauce-2.png" class="pizza">
                                    <p>Barbecue</p>
                                </div>
                                <input type="radio" value="2" class="sauce1" name="sauce">
                            </label>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="sauce">
                                <div class="pizza">
                                    <img src="resources/img/sauce-3.png" class="pizza">
                                    <p>Parmesan</p>
                                </div>
                                <input type="radio" value="3" class="sauce1" name="sauce">
                            </label>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="sauce">
                                <div class="pizza">
                                    <img src="resources/img/sauce-4.png" class="sauce1" class="pizza">
                                    <p>Buffalo</p>
                                </div>
                                <input type="radio" value="4" class="sauce1" name="sauce">
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12">
                            <br>
                            <center>
                                <img src="resources/img/dash.png">
                            </center>
                            <br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="order-steps">
                            <span class="badge order-bullet">3</span>
                            <span class="order-subtitle">Do you want cheese?</span>
                        </div>
                        <br>
                        <div class="small-12 large-3 columns">
                            <label class="cheese">
                                <div class="pizza">
                                    <img src="resources/img/cheese.png" class="pizza">
                                    <p>Yes, please</p>
                                </div>
                                <input type="radio" value="1" class="cheese1" name="cheese">
                            </label>
                        </div>
                        <div class="small-12 large-9 columns">
                            <label class="cheese">
                                <div class="pizza" style="text-align: left">
                                    <p class="no-cheese">No, thanks</p>
                                </div>
                                <input type="radio" value="2" class="cheese1" name="cheese">
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12">
                            <br>
                            <center>
                                <img src="resources/img/dash.png">
                            </center>
                            <br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="order-steps">
                            <span class="badge order-bullet">4</span>
                            <span class="order-subtitle">Toppings:</span>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="toppings">
                                <div class="pizza" id="img_n1">
                                    <img src="resources/img/topping-1.png" class="pizza" style="padding-top: 20px">
                                    <p>Peperoni</p>
                                </div>
                                <input type="checkbox" value="1" name="toppings" id="n1" class="topping">
                            </label>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="toppings">
                                <div class="pizza" id="img_n2">
                                    <img src="resources/img/topping-2.png" class="pizza">
                                    <p>Bacon</p>
                                </div>
                                <input type="checkbox" value="2" name="toppings" id="n2" class="topping">
                            </label>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="toppings">
                                <div class="pizza"  id="img_n3">
                                    <img src="resources/img/topping-3.png" class="pizza" style="padding-top: 20px">
                                    <p>Ham</p>
                                </div>
                                <input type="checkbox" value="3" name="toppings" id="n3" class="topping">
                            </label>
                        </div>
                        <div class="small-12 large-3 columns">
                            <label class="toppings">
                                <div class="pizza"  id="img_n4">
                                    <img src="resources/img/topping-4.png" class="pizza" style="padding-top: 5px">
                                    <p>Canandian Ham</p>
                                </div>
                                <input type="checkbox" value="4" name="toppings" id="n4" class="topping">
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12">
                            <br>
                            <center>
                                <img src="resources/img/dash.png">
                            </center>
                            <br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="order-steps">
                            <span class="badge order-bullet">5</span>
                            <span class="order-subtitle">Veggies</span>
                        </div>
                        <br>
                        <div class="small-12 large-3 columns">
                            <label class="veggies">
                                <div class="pizza" id="img_v1">
                                    <img src="resources/img/veggie-1.png" class="pizza">
                                    <p>Bell pepper</p>
                                </div>
                                <input type="checkbox" value="1" name="toppings" id="v1" class="veggie">
                            </label>
                        </div>
                        <div class="small-12 large-9 columns">
                            <label class="veggies">
                                <div class="pizza" style="text-align: left" id="img_v2">
                                    <img src="resources/img/veggie-2.png" style="padding-top: 13px">
                                    <p style="text-align: left">Olives</p>
                                </div>
                                <input type="checkbox" value="2" name="toppings" id="v2" class="veggie">
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12">
                            <br>
                            <center>
                                <img src="resources/img/dash.png">
                            </center>
                            <br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-9 columns">
                            <div class="pizza">
                                <div class="order-steps">
                                    <span class="badge order-bullet">6</span>
                                    <span class="order-subtitle">Review your order</span>
                                </div>

                                <br>

                                <table class="order-review">
                                    <thead>
                                    <tr>
                                        <th></th>
                                        <th>Item</th>
                                        <th>Price</th>
                                    </tr>
                                    </thead>
                                    <tbody class="itemsToAdd">
                                    <tbody>
                                        <tr class="crust">
                                        </tr>
                                    <tbody>
                                    <tbody>
                                        <tr class="sauce2">
                                        </tr>
                                    </tbody>
                                    <tbody>
                                        <tr class="cheese2">
                                        </tr>
                                    </tbody>
                                    <tbody class="topping2">
                                    </tbody>
                                    <tbody class="veggie2">
                                    </tbody>
                                    <tr>
                                        <td></td>
                                        <td><b>Total: </b>(Before taxes)</td>
                                        <td class="order-total"></td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                        <div class="small-12 large12 columns">
                            <div class="pizza">
                                <a href="javascript:void(0)" class="sendData"><img src="resources/img/go-2.png" ></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Here are some hidden fields to transport the data from this page to order.php -->
            <input type="hidden" name="crust" class="form-crust" value="">
            <input type="hidden" name="sauce" class="form-sauce" value="">
            <input type="hidden" name="cheese" class="form-cheese" value="">
            <input type="hidden" name="toppings" class="form-toppings" value="">
            <input type="hidden" name="veggies" class="form-veggies" value="">
            <input type="hidden" name="total" class="form-total" value="">

        </form>
    </div>
</div>


<script>
    $(document).ready(function() {
        $('#fullpage').fullpage({
            autoScrolling: false,
            fitToSection: false
        });

        function beeLeft() {
            $("#b").animate({top: "-=30"}, 1500, "swing", beeRight);
        }
        function beeRight() {
            $("#b").animate({top: "+=30"}, 1500, "swing", beeLeft);
        }

        beeRight();

        $('.home-button').click(function(){

            $('html, body').animate({
                scrollTop: $(".order").offset().top
            }, 2000);

        });

        $(".size").click(function() {
            $(".size").fadeTo("400", 0.4);
            $(this).fadeTo( "fast", 1.0 );

            var size = $('.size1:checked').val();
            var row;

            if (size == 1)
                row = "<td><b>Size: </b></td><td>Large</td><td class='price' data-price='5'>$5.00</td>";
            if (size == 2)
                row = "<td><b>Size: </b></td><td>Medium</td><td class='price' data-price='4'>$4.00</td>";
            if (size == 3)
                row = "<td><b>Size: </b></td><td>Small</td><td class='price' data-price='3'>$3.00</td>";
            $('.crust').html(row);

        });
        $(".sauce").click(function() {
            $(".sauce").fadeTo("400", 0.4);
            $(this).fadeTo( "fast", 1.0 );

            var souce = $('.sauce1:checked').val();
            var row;

            if (souce == 1)
                row = "<td><b>Sauce: </b></td><td>Marinara</td><td class='price' data-price='1'>$1.00</td>";
            if (souce == 2)
                row = "<td><b>Sauce: </b></td><td>Barbecue</td><td class='price' data-price='1'>$1.00</td>";
            if (souce == 3)
                row = "<td><b>Sauce: </b></td><td>Parmesan</td><td class='price' data-price='1'>$1.00</td>";
            if (souce == 4)
                row = "<td><b>Sauce: </b></td><td>Buffalo</td><td class='price' data-price='1'>$1.00</td>";
            $('.sauce2').html(row);

        });
        $(".cheese").click(function() {
            $(".cheese").fadeTo("400", 0.4);
            $(this).fadeTo( "fast", 1.0 );

            var cheese = $('.cheese1:checked').val();
            var row;

            if (cheese == 1)
                row = "<td><b>Cheese: </b></td><td>Yes</td><td class='price' data-price='1'>$1.00</td>";
            if (cheese == 2)
                row = "<td><b>Cheese: </b><td>No</td><td class='price' data-price='1'>$0.00</td>";
            $('.cheese2').html(row);

        });
        $(".toppings").click(function() {
            var row;

            if($("#n1").is(':checked')){
                $("#img_n1").fadeTo('fast', 1);
                if ($('.topping2').find(".t1").length < 1)
                    row = "<tr class='t1'><td><b >Topping: </b></td><td class='top'>Pepperoni</td><td class='price' data-price='1'>$1.00</td></tr>";
            }
            else{
                $("#img_n1").fadeTo(400, 0.4);
                $(".topping2").find("tr.t1").remove();
            }
            if($("#n2").is(':checked')){
                $("#img_n2").fadeTo('fast', 1);
                if ($('.topping2').find(".t2").length < 1)
                    row = "<tr class='t2'><td><b>Topping: </b></td><td class='top'>Bacon</td><td class='price' data-price='1'>$1.00</td></tr>";
            }
            else{
                $("#img_n2").fadeTo(400, 0.4);
                $(".topping2").find("tr.t2").remove();
            }
            if($("#n3").is(':checked')){
                $("#img_n3").fadeTo('fast', 1);
                if ($('.topping2').find(".t3").length < 1)
                    row = "<tr class='t3'><td><b>Topping: </b></td><td class='top'>Ham</td><td class='price' data-price='1'>$1.00</td></tr>";
            }
            else{
                $("#img_n3").fadeTo(400, 0.4);
                $(".topping2").find("tr.t3").remove();
            }
            if($("#n4").is(':checked')){
                $("#img_n4").fadeTo('fast', 1);
                if ($('.topping2').find(".t4").length < 1)
                    row = "<tr class='t4'><td><b>Topping: </b></td><td class='top'>Canadian Bacon</td><td class='price' data-price='1'>$1.00</td></tr>";
            }
            else{
                $("#img_n4").fadeTo(400, 0.4);
                $(".topping2").find("tr.t4").remove();
            }
            $('.topping2').append(row);


        });
        $(".veggies").click(function() {
            var row;

            if ($("#v1").is(':checked')){
                $("#img_v1").fadeTo('fast', 1);
                if ($('.veggie2').find(".v1").length < 1)
                    row = "<tr class='v1'><td><b>Topping: </b></td><td class='veg'>Bell Pepper</td><td class='price' data-price='0.5'>$0.50</td></tr>";
            }
            else{
                $("#img_v1").fadeTo(400, 0.4);
                $(".veggie2").find(".v1").remove();
            }
            if ($("#v2").is(':checked')){
                $("#img_v2").fadeTo('fast', 1);
                if ($('.veggie2').find(".v2").length < 1)
                    row = "<tr class='v2'><td><b>Topping: </b></td><td class='veg'>Black Olives</td><td class='price' data-price='0.5'>$0.50</td></tr>";
            }
            else{
                $("#img_v2").fadeTo(400, 0.4);
                $(".veggie2").find(".v2").remove();
            }
            $('.veggie2').append(row);
        });

        var pre_total = 0;

        $("body").on("click", function() {
            var pre_total =0;
            $('.price').each(function(){
                var num = $(this).data("price");
                 pre_total += num;

                $('.order-total').html(toUSD(pre_total));
                $('.form-total').val(toUSD(pre_total));
            });

        });

        function toUSD(number) {
            var number = number.toString(),
                    dollars = number.split('.')[0],
                    cents = (number.split('.')[1] || '') +'00';
            dollars = dollars.split('').reverse().join('')
                    .replace(/(\d{3}(?!$))/g, '$1,')
                    .split('').reverse().join('');
            return '$' + dollars + '.' + cents.slice(0, 2);
        }

        $('.sendData').on('click', function(){
            if($('.size1:checked').length < 1)
                alert("You haven't selected the size of your pizza");
            else if($('.sauce1:checked').length < 1)
                alert("You haven't selected the sauce of your pizza");
            else if($('.cheese1:checked').length < 1)
                alert("You haven't selected if you want cheese or not your pizza");
            else{
                $('.form-crust').val($('.crust td:nth-child(2)').html());
                $('.form-sauce').val($('.sauce2 td:nth-child(2)').html());
                $('.form-cheese').val($('.cheese2 td:nth-child(2)').html());
                
                var pizza_toppings = [];
                $('.topping2>tr').each(function() {
                    var arrayOfThisRow = [];
                    var tableData = $(this).find('td.top');
                    if (tableData.length > 0) {
                        tableData.each(function() { arrayOfThisRow.push($(this).text()); });
                        pizza_toppings.push(arrayOfThisRow);
                    }
                });
                $('.form-toppings').val(pizza_toppings);

                var pizza_veggies = [];
                $('.veggie2>tr').each(function() {
                    var arrayOfThisRow = [];
                    var tableData = $(this).find('td.veg');
                    if (tableData.length > 0) {
                        tableData.each(function() { arrayOfThisRow.push($(this).text()); });
                        pizza_veggies.push(arrayOfThisRow);
                    }
                });
                $('.form-veggies').val(pizza_veggies);


                //$('.order-form').submit();
            }
        });

    });

</script>
</body>
</html>